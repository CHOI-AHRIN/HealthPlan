-- Active: 1728281287544@@127.0.0.1@1521@XE@HEALTH

-- 회원 테이블
CREATE TABLE Member (
    mNo NUMBER NOT NULL, -- 회원번호
    uuid VARCHAR2(230), -- 아이디
    upw VARCHAR2(1000), -- 비밀번호
    phone VARCHAR2(100), -- 전화번호
    name VARCHAR2(220), -- 이름
    mType CHAR(1), -- 회원타입
    email VARCHAR2(100), -- 이메일
    regdate DATE, -- 가입일
    sessionKey VARCHAR2(250), -- 세션키
    sessionLimit TIMESTAMP, -- 세션만료시간
    ssType CHAR(1), -- 구독타입
    PRIMARY KEY (mNo)
);

-- 보드(챌린지, FAQ) 테이블
CREATE TABLE Board (
    bNo NUMBER NOT NULL, -- 보드번호
    mNo NUMBER, -- 회원번호
    bType CHAR(1), -- 게시물종류
    title VARCHAR2(100), -- 글제목
    bContents VARCHAR2(2000), -- 글내용
    wDate DATE, -- 작성일자
    bCounts NUMBER, -- 조회수
    PRIMARY KEY (bNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);

-- 보드 댓글
CREATE TABLE BReply (
    rNo NUMBER NOT NULL, -- 댓글번호
    mNo NUMBER, -- 회원번호
    bNo NUMBER, -- 보드번호
    rComment VARCHAR2(1000), -- 댓글내용
    rRegdate DATE, -- 댓글작성일
    PRIMARY KEY (rNo),
    FOREIGN KEY (bNo) REFERENCES Board(bNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);


-- 구독 테이블
CREATE TABLE Subscribe (
    sNo NUMBER NOT NULL, -- 구독번호
    uuid VARCHAR2(230), -- 아이디
    mNo NUMBER not null, -- 회원번호
    lNo NUMBER, -- 구독상품번호
    sType CHAR(1), -- 구독상품타입
    Title VARCHAR2(100), -- 글제목
    Contents VARCHAR2(2000), -- 글내용
    wDate DATE, -- 작성일자
    Counts NUMBER, -- 조회수
    fileId VARCHAR2(250), -- 파일ID
    fileName VARCHAR2(250), -- 파일이름
    replycnt NUMBER, -- 댓글수
    spoint NUMBER, -- 포인트
    PRIMARY KEY (sNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);

-- 구독 댓글
CREATE TABLE SReply (
    rNo NUMBER NOT NULL, -- 댓글번호
    mNo NUMBER, -- 회원번호
    sNo NUMBER, -- 구독번호
    rComment VARCHAR2(1000), -- 댓글내용
    rRegdate DATE, -- 댓글작성일
    PRIMARY KEY (rNo),
    FOREIGN KEY (sNo) REFERENCES Subscribe(sNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);



-- 커뮤니티 테이블
CREATE TABLE Community (
    cNo NUMBER NOT NULL, -- 커뮤니티번호
    mNo NUMBER, -- 회원번호
    cType CHAR(1), -- 커뮤니티소분류
    Title VARCHAR2(100), -- 글제목
    Contents VARCHAR2(2000), -- 글내용
    wDate DATE, -- 작성일자
    Counts NUMBER, -- 조회수
    replycnt NUMBER, -- 댓글수
    PRIMARY KEY (cNo)
);

-- 커뮤니티 댓글
CREATE TABLE CReply (
    rNo NUMBER NOT NULL, -- 댓글번호
    mNo NUMBER, -- 회원번호
    cNo NUMBER, -- 커뮤니티번호
    rComment VARCHAR2(1000), -- 댓글내용
    rRegdate DATE, -- 댓글작성일
    PRIMARY KEY (rNo),
    FOREIGN KEY (cNo) REFERENCES Community(cNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);


-- drop table point;
-- 포인트 테이블
CREATE TABLE Point (
    pNo NUMBER NOT NULL, -- 포인트번호
    mNo NUMBER, -- 회원번호
    pSource VARCHAR2(100), -- 포인트출처
    pcount NUMBER,
    pDate DATE, -- 포인트생성일
    PRIMARY KEY (pNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);



-- 주문 테이블
CREATE TABLE Orders (
    oNo NUMBER NOT NULL, -- 주문번호
    mNo NUMBER, -- 회원번호
    oType CHAR(1), -- 주문타입
    status CHAR(1), -- 상태
    amount NUMBER, -- 금액
    price NUMBER, -- 가격
    oComment VARCHAR2(250), -- 주문코멘트
    oDate DATE, -- 주문일자
    PRIMARY KEY (oNo),
    FOREIGN KEY (mNo) REFERENCES Member(mNo)
);

-- 첨부
CREATE TABLE NATTACH (
    UUID VARCHAR2(200)
  , IMGNAME varchar2(200)
  , SNO NUMBER
  , ANO NUMBER
  , PATH VARCHAR2(200)
  , IMAGEURL VARCHAR2(200)
  , IMGTYPE CHAR(1 BYTE)
  , REGDATE DATE
);


-- 시퀀스
CREATE SEQUENCE ACNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE ANO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE ATTACHED_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE BOARD_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE BREPLY_RNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE BREPLY_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE CNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE CRNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE DNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE ENO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE FBNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE MNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE PNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE RNOSEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE RNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE SEQ_BOARD_BNO
    MINVALUE 1
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;

CREATE SEQUENCE SNO_SEQ
    MINVALUE 1
    MAXVALUE 9999999999
    INCREMENT BY 1
    START WITH 1
    NOCACHE;
