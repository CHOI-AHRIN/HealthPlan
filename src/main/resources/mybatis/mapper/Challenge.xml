<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.healthplan.work.dao.ChallengeMapper">

    <!-- 챌린지 목록 조회 -->
    <select id="selectChallengeList" resultType="com.healthplan.work.vo.ChallengeEntity">
        SELECT bno, mno, title, bcontents, wdate, bcounts
        FROM BOARD
        ORDER BY bno DESC
    </select>

    <!-- 챌린지 상세 조회 -->
    <select id="selectChallengeRead" parameterType="int" resultType="com.healthplan.work.vo.ChallengeEntity">
        SELECT bno, mno, title, bcontents, wdate, bcounts
        FROM BOARD
        WHERE bno = #{bno}
    </select>

    <!-- 챌린지 등록 -->
    <insert id="insertChallenge" parameterType="com.healthplan.work.vo.ChallengeEntity">
        <selectKey keyProperty="bno" resultType="int" order="BEFORE">
            SELECT BOARD_SEQ.NEXTVAL AS bno FROM DUAL
        </selectKey>
        INSERT INTO BOARD (bno, mno, title, bcontents, wdate, bcounts)
        VALUES (#{bno}, #{mno}, #{title}, #{bcontents}, SYSDATE, 0)
    </insert>

    <!-- 챌린지 수정 -->
    <update id="updateChallenge" parameterType="com.healthplan.work.vo.ChallengeEntity">
        UPDATE BOARD
        SET title = #{title},
        bcontents = #{bcontents}
        WHERE bno = #{bno}
    </update>

    <!-- 챌린지 삭제 -->
    <delete id="deleteChallenge" parameterType="int">
        DELETE FROM BOARD
        WHERE bno = #{bno}
    </delete>

</mapper>